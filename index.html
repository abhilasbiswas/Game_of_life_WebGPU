<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game of Life</title>
</head>
<body>
    <canvas id="canvas" width="512" height="512"></canvas>


    <script>
        async function main(){

            if (!navigator.gpu){
                alert("WebGPU not supported");
            }

            const adapter = await navigator.gpu.requestAdapter();
            if (!adapter){
                alert("Adapter not found!");
            }

            const device = await adapter.requestDevice();

            const canvas = document.getElementById("canvas");
            const context = canvas.getContext("webgpu");
            const canvasFormat = navigator.gpu.getPreferredCanvasFormat();
            context.configure({
                device: device,
                format: canvasFormat,
            });


            const encoder = device.createCommandEncoder();
            const pass = encoder.beginRenderPass({
                colorAttachments: [{
                    view: context.getCurrentTexture().createView(),
                    loadOp: "clear",
                    clearValue: [0,0.1, 0.32, 1],
                    storeOp: "store",
                }]
            });

            pass.end();

            device.queue.submit([encoder.finish()]);


            

        }
        main();
    </script>
</body>
</html>